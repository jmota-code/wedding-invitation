---
import { addGuest, getGuests } from "@repository/guest";
import GuestList from "@components/GuestList.astro";

if (Astro.request.method === "POST") {

  const data = await Astro.request.formData();
  addGuest({
    name: data.get("name") as string,
    expectedAttendees: parseInt(data.get("expectedAttendees") as string),
    confirmedAttendees: 0
  });
}
const guests = getGuests();
---

<GuestList guests={guests} />

