---
import { addGuest, getGuests } from "@repository/guest";
import GuestList from "@components/GuestList.astro";

if (Astro.request.method === "POST") {
  const data = await Astro.request.formData();
  await addGuest({
    name: data.get("name") as string,
    expected_attendees: parseInt(data.get("expectedAttendees") as string),
    confirmed_attendees: 0,
    bus: false
  });
}
const guests = await getGuests();
---

<GuestList guests={guests} />

